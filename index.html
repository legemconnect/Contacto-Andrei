<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Andrei Dima | Perfil Legal & Tech</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Perfil profesional de Andrei Dima. Derecho & IA.">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/mapdata/custom/europe.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    <style>
        /* --- 1. VARIABLES & RESET --- */
        :root {
            --bg-deep: #0f172a;
            --bg-card: #1e293b;
            --accent-primary: #38bdf8; 
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --radius-lg: 24px;
            --radius-sm: 12px;
            --font-main: 'Inter', sans-serif;
            --font-display: 'Space Grotesk', sans-serif;
            --border-color: #334155;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: var(--font-main);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: opacity 0.2s ease-in-out; 
            opacity: 1;
        }

        body.fading { opacity: 0.8; }

        /* --- 2. LAYOUT --- */
        .main-wrapper {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
            display: grid;
            grid-template-columns: 320px 1fr; 
            gap: 30px;
            align-items: start;
        }

        /* --- 3. SIDEBAR --- */
        .sidebar {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 30px;
            text-align: center;
            position: sticky;
            top: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .profile-img-wrapper {
            width: 140px; 
            height: 140px;
            margin: 0 auto;
            border-radius: 20px; 
            padding: 6px;
            background: var(--accent-primary); 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-img-wrapper img {
            width: 100%; height: 100%; object-fit: contain;
            border-radius: 14px; background: #fff; border: 3px solid var(--bg-card);
        }

        .sidebar h3 {
            font-family: var(--font-display); font-size: 1.6rem; margin-bottom: 5px; color: #fff;
        }

        .tagline {
            font-size: 0.85rem; color: var(--accent-primary); text-transform: uppercase;
            letter-spacing: 1.5px; font-weight: 700; margin-bottom: 5px;
        }

        .social-links { display: flex; justify-content: center; gap: 15px; }
        .social-links a {
            width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: #334155; color: var(--text-main);
            transition: all 0.2s; text-decoration: none; font-size: 1.2rem;
        }
        .social-links a:hover {
            background: var(--accent-primary); color: #0f172a; transform: translateY(-2px);
        }

        /* --- 4. CONTENT AREA --- */
        .content-area { display: flex; flex-direction: column; gap: 30px; }

        .section-header {
            display: flex; align-items: center; gap: 12px; margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color); padding-bottom: 10px;
        }
        .section-header i { color: var(--accent-primary); font-size: 1.2rem; }
        .section-header h3 { font-family: var(--font-display); font-size: 1.4rem; margin: 0; }

        .clean-card {
            background-color: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: var(--radius-sm); padding: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        ul { list-style: none; padding: 0; display: grid; gap: 12px; }
        .link-card {
            display: flex; align-items: center; padding: 15px;
            background-color: #28364a; border-radius: 8px;
            text-decoration: none; color: var(--text-main);
            transition: background 0.2s, transform 0.2s; font-weight: 500;
        }
        .link-card:hover {
            background-color: #334155; transform: translateX(5px); color: var(--accent-primary);
        }
        .link-card i { margin-right: 15px; color: var(--accent-primary); width: 20px; text-align: center; }

        /* Quiz */
        .andi-quiz-term strong {
            display: block; font-size: 2rem; font-family: var(--font-display);
            color: #fff; margin: 10px 0;
            transition: color 0.3s;
        }
        .andi-quiz-answer {
            background: #064e3b; color: #6ee7b7; padding: 10px;
            border-radius: 8px; margin: 20px 0; display: none; font-weight: bold;
        }
        .andi-quiz-answer.visible { display: block; animation: fadeIn 0.3s; }
        .andi-quiz-controls button {
            padding: 10px 20px; border-radius: 6px; border: none;
            font-weight: 600; cursor: pointer; transition: 0.2s;
        }
        #andi-btn-reveal { background: var(--accent-primary); color: #0f172a; }
        
        /* Mapa */
        .map-toggle {
            width: 100%; padding: 15px; background: #28364a; color: var(--text-main);
            border: none; border-radius: 8px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        .map-content {
            max-height: 0; overflow: hidden; transition: max-height 0.5s ease; opacity: 0;
        }
        .map-content.expanded { max-height: 600px; opacity: 1; margin-top: 20px; }
        #map-container { height: 500px; width: 100%; border-radius: 8px; background: #182333; }

        .custom-tooltip {
            padding: 12px; text-align: center; color: #333;
            width: 200px; transition: width 0.3s ease;
        }
        .custom-tooltip.wide { width: 360px; }
        .tooltip-gallery {
            display: grid; grid-template-columns: 1fr; gap: 6px; margin-bottom: 8px;
        }
        .custom-tooltip.wide .tooltip-gallery { grid-template-columns: 1fr 1fr; }
        .tooltip-gallery img {
            width: 100%; height: 110px; object-fit: cover;
            border-radius: 6px; background-color: #ddd;
        }

        /* Formulario */
        form label { font-size: 0.9rem; color: var(--text-muted); margin-top: 15px; display: block; }
        input, textarea {
            width: 100%; padding: 12px; margin-top: 5px;
            background: #0f172a; border: 1px solid var(--border-color);
            border-radius: 6px; color: #fff; font-family: inherit;
        }
        button[type="submit"] {
            width: 100%; padding: 14px; margin-top: 25px;
            background: var(--accent-primary); color: #0f172a;
            border: none; font-weight: 700; border-radius: 6px; cursor: pointer;
            transition: all 0.3s ease;
        }
        button[type="submit"].loading {
            background: #475569; color: #94a3b8; cursor: not-allowed;
        }

        .language-selector { margin-bottom: 20px; display: flex; justify-content: center; gap: 10px; }
        .lang-btn {
            background: transparent; border: 1px solid var(--border-color);
            color: var(--text-muted); padding: 6px 16px; border-radius: 20px; cursor: pointer;
            font-size: 0.95rem; display: flex; align-items: center; gap: 6px;
        }
        .lang-btn.active { background: var(--accent-primary); color: #0f172a; border-color: var(--accent-primary); font-weight: bold; }

        footer { margin-top: 50px; text-align: center; font-size: 0.8rem; color: var(--text-muted); padding-bottom: 20px;}
        .confirmation, .error { 
            padding: 15px; border-radius: 6px; margin-top: 15px; display: none; text-align: center; 
            animation: slideIn 0.4s ease-out;
        }
        .confirmation { background: #064e3b; color: #6ee7b7; border: 1px solid #047857; }
        .error { background: #7f1d1d; color: #fca5a5; border: 1px solid #b91c1c; }

        @media (max-width: 850px) {
            .main-wrapper { grid-template-columns: 1fr; gap: 30px; padding: 20px 15px; }
            .sidebar { position: relative; top: 0; padding: 20px; }
            #map-container { height: 400px; }
            .custom-tooltip.wide { width: 280px; }
        }
        
        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
        @keyframes slideIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <aside class="sidebar">
            <div class="language-selector">
                <button class="lang-btn active" data-lang="es"> ES</button>
                <button class="lang-btn" data-lang="en"> EN</button>
            </div>

            <div class="profile-img-wrapper">
                <img src="img/Uji.png" alt="Logo UJI" onerror="this.src='https://via.placeholder.com/150/38bdf8/ffffff?text=UJI'">
            </div>
            
            <div class="profile-text">
                <div class="tagline">Law & Tech</div>
                <h3 id="about-title">Andrei Dima</h3>
                <p class="bio-text" id="about-text1" style="color:var(--text-muted); font-size:0.9rem;">Estudiante de Derecho con una profunda pasi贸n por la tecnolog铆a, la inteligencia artificial y el asesoramiento jur铆dico empresarial.</p>
                <p class="bio-text" id="about-text2" style="color:var(--text-muted); font-size:0.85rem;">Este sitio sirve como mi portal profesional, donde puedes encontrar mis publicaciones, trabajos y una forma directa de contactarme.</p>
            </div>

            <div class="social-links">
                <a href="https://www.linkedin.com/in/andidima/" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
                <a href="https://github.com/legemconnect/Contacto-Andrei" target="_blank" title="GitHub"><i class="fa-brands fa-github"></i></a>
                <a href="mailto:andreidimaavram@gmail.com" title="Email"><i class="fa-solid fa-envelope"></i></a>
            </div>
        </aside>

        <main class="content-area">
            <section id="mis-informes" class="clean-card">
                <div class="section-header">
                    <i class="fa-solid fa-book-open"></i>
                    <h3 id="reports-title">Trabajos Acad茅micos</h3>
                </div>
                <p id="reports-subtitle" style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.9rem;">Accede a mis trabajos acad茅micos y proyectos.</p>
                <ul>
                    <li>
                        <a href="reports/Fondos NewGen.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-earth-europe"></i>
                            <span id="report1">Fondos NewGen UE: An谩lisis Jur铆dico</span>
                        </a>
                    </li>
                    <li>
                        <a href="reports/Comentario STS.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-scale-balanced"></i>
                            <span id="report2">Comentario: Sentencia del Tribunal Supremo (191/2021)</span>
                        </a>
                    </li>
                    <li>
                        <a href="reports/Comentario STS 2.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-scale-balanced"></i>
                            <span id="report3">Comentario: Sentencia del Tribunal Supremo (3079/2016)</span>
                        </a>
                    </li>
                    <li>
                        <a href="reports/Jueces Robot.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-microchip"></i>
                            <span id="report4">An谩lisis Jur铆dico de los Jueces Robot</span>
                        </a>
                    </li>
                    <li>
                        <a href="reports/Transporte Maritimo.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-ship"></i>
                            <span id="report5">Presentaci贸n sobre Transporte Mar铆timo</span>
                        </a>
                    </li>
                    <li>
                        <a href="reports/Responsabilidad Extracontractual.pdf" target="_blank" class="link-card">
                            <i class="fa-solid fa-globe"></i>
                            <span id="report6">An谩lisis Pr谩ctico de Responsabilidad Extracontractual Internacional</span>
                        </a>
                    </li>
                </ul>
            </section>

            <section id="andi-quiz-section" class="clean-card" style="text-align:center;">
                <div class="section-header" style="justify-content: center; border:none; flex-direction: column; gap:5px;">
                    <h3 id="andi-quiz-title"><i class="fa-solid fa-brain" style="color:var(--accent-primary); margin-right:8px;"></i> Quiz Traducci贸n Jur铆dica</h3>
                    <p id="quiz-subtitle" style="font-size:0.8rem; color:var(--text-muted); margin:0;">Adivina la traducci贸n correcta</p>
                </div>
                <div class="andi-quiz-term">
                    <span style="color: var(--text-muted); font-size:0.8rem; text-transform: uppercase;">T茅rmino / Term</span>
                    <strong id="andi-quiz-term-text">Abogado</strong>
                </div>
                <div class="andi-quiz-answer" id="andi-quiz-answer">Lawyer</div>
                <div class="andi-quiz-controls">
                    <button id="andi-btn-reveal" type="button">Revelar</button>
                    <button id="andi-btn-next" class="secondary" type="button" style="background:transparent; border:1px solid #334155; color:#fff; margin-left:10px;">Siguiente</button>
                </div>
            </section>

            <section id="mis-viajes">
                <div class="section-header">
                    <i class="fa-solid fa-earth-americas"></i>
                    <h3 id="travel-title">Mis Viajes</h3>
                </div>
                <button class="map-toggle" id="mapToggle">
                    <span id="map-toggle-text">Desplegar Mapa Interactivo</span>
                    <i class="fa-solid fa-chevron-down"></i>
                </button>
                <div class="map-content" id="mapContent">
                    <div id="map-container"></div>
                </div>
            </section>
            
            <section id="formulario-contacto" class="clean-card">
                <div class="section-header">
                    <i class="fa-solid fa-gavel"></i>
                    <h3 id="contact-title">Consulta Legal</h3>
                </div>
                <p id="contact-subtitle" style="color: var(--text-muted); font-size: 0.9rem;">Formulario para revisi贸n preliminar.</p>
                <form id="legal-form">
                    <label for="name" id="label-name">Nombre:</label>
                    <input type="text" id="name" name="name" required>
                    <label for="email" id="label-email">Correo electr贸nico:</label>
                    <input type="email" id="email" name="email" required>
                    <label for="phone" id="label-phone">Tel茅fono:</label>
                    <input type="tel" id="phone" name="phone" required>
                    <label for="description" id="label-description">Descripci贸n del problema:</label>
                    <textarea id="description" name="description" required rows="4"></textarea>
                    
                    <label for="jurisdiction" id="label-jurisdiction">Ubicaci贸n actual (Ciudad, Pa铆s):</label>
                    <input type="text" id="jurisdiction" name="jurisdiction" placeholder="Ej: Madrid, Espa帽a" required>
                    
                    <button type="submit"><span id="btn-submit">Enviar Consulta</span></button>
                </form>
                <div id="confirmation" class="confirmation"><span id="confirmation-text">隆Enviado correctamente!</span></div>
                <div id="error" class="error"><span id="error-text">Error al enviar.</span></div>
                <div id="response" style="display:none; margin-top: 20px; background: #182333; padding: 15px; border-radius: 6px; border-left: 3px solid var(--accent-primary);"></div>
            </section>

            <footer>
                <p><strong id="disclaimer-title" style="color: #fca5a5;">Descargo de responsabilidad:</strong> <span id="disclaimer-text">La informaci贸n proporcionada en este sitio es solo para fines acad茅micos y no constituye asesoramiento legal. Consulte siempre con un abogado calificado para problemas legales espec铆ficos.</span></p>
                <p id="footer-contact">Contacto: andreidimaavram@gmail.com</p>
            </footer>
        </main>
    </div>

    <script>
        /* ================= DATOS MAPA (RUTAS LOCALES) ================= */
        const visitedCountriesData = [
            { code: 'es', name: {es: 'Espa帽a', en: 'Spain'}, text: {es: 'Mi hogar y base de mi educaci贸n.', en: 'My home and the base of my education.'}, imgs: ['img/paises/espana_1.jpg','img/paises/espana_2.jpg','img/paises/espana_3.jpg','img/paises/espana_4.jpg'] },
            { code: 'fr', name: {es: 'Francia', en: 'France'}, text: {es: 'Viaje a Francia.', en: 'Trip to France.'}, imgs: ['img/paises/francia_1.jpg'] },
            { code: 'ie', name: {es: 'Irlanda', en: 'Ireland'}, text: {es: 'Experiencia en Irlanda.', en: 'Experience in Ireland.'}, imgs: ['img/paises/irlanda_1.jpg','img/paises/irlanda_2.jpg','img/paises/irlanda_3.jpg'] },
            { code: 'ch', name: {es: 'Suiza', en: 'Switzerland'}, text: {es: 'Alpes suizos.', en: 'Swiss Alps.'}, imgs: ['img/paises/suiza_1.jpg'] },
            { code: 'it', name: {es: 'Italia', en: 'Italy'}, text: {es: 'Bella Italia.', en: 'Beautiful Italy.'}, imgs: ['img/paises/italia_1.jpg'] },
            { code: 'de', name: {es: 'Alemania', en: 'Germany'}, text: {es: 'Alemania.', en: 'Germany.'}, imgs: ['img/paises/alemania_1.jpg'] },
            { code: 'at', name: {es: 'Austria', en: 'Austria'}, text: {es: 'Austria imperial.', en: 'Imperial Austria.'}, imgs: ['img/paises/austria_1.jpg','img/paises/austria_2.jpg'] },
            { code: 'cz', name: {es: 'Rep. Checa', en: 'Czech Rep.'}, text: {es: 'Brno: mi segunda casa.', en: 'Brno: my second home.'}, imgs: ['img/paises/chequia_1.jpg','img/paises/chequia_2.jpg','img/paises/chequia_3.jpg','img/paises/chequia_4.jpg'] },
            { code: 'si', name: {es: 'Eslovenia', en: 'Slovenia'}, text: {es: 'Naturaleza eslovena.', en: 'Slovenian nature.'}, imgs: ['img/paises/eslovenia_1.jpg'] },
            { code: 'hu', name: {es: 'Hungr铆a', en: 'Hungary'}, text: {es: 'Budapest.', en: 'Budapest.'}, imgs: ['img/paises/hungria_1.jpg'] },
            { code: 'ro', name: {es: 'Ruman铆a', en: 'Romania'}, text: {es: 'Mis ra铆ces y familia.', en: 'My roots and family.'}, imgs: ['img/paises/rumania_1.jpg'] },
            { code: 'ad', name: {es: 'Andorra', en: 'Andorra'}, text: {es: 'Andorra', en: 'Andorra'}, imgs: [] },
            { code: 'mc', name: {es: 'M贸naco', en: 'Monaco'}, text: {es: 'M贸naco', en: 'Monaco'}, imgs: [] }
        ];

        /* ================= TRADUCCIONES ================= */
        const translations = {
            es: {
                'about-title': 'Andrei Dima', 
                'about-text1': 'Estudiante de Derecho con una profunda pasi贸n por la tecnolog铆a, la inteligencia artificial y el asesoramiento jur铆dico empresarial.',
                'about-text2': 'Este sitio sirve como mi portal profesional, donde puedes encontrar mis publicaciones, trabajos y una forma directa de contactarme.',
                'reports-title': 'Trabajos Acad茅micos', 
                'reports-subtitle': 'Accede a mis trabajos acad茅micos y proyectos.', 
                'report1': 'Fondos NewGen UE: An谩lisis Jur铆dico', 
                'report2': 'Comentario: Sentencia del Tribunal Supremo (191/2021)', 
                'report3': 'Comentario: Sentencia del Tribunal Supremo (3079/2016)',
                'report4': 'An谩lisis Jur铆dico de los Jueces Robot', 
                'report5': 'Presentaci贸n sobre Transporte Mar铆timo',
                'report6': 'An谩lisis Pr谩ctico de Responsabilidad Extracontractual Internacional',
                'travel-title': 'Mis Viajes', 'map-show': 'Desplegar Mapa', 'map-hide': 'Ocultar Mapa', 
                'contact-title': 'Consulta Legal', 'contact-subtitle': 'Formulario para revisi贸n preliminar.', 'label-name': 'Nombre:', 'label-email': 'Correo electr贸nico:', 'label-phone': 'Tel茅fono:', 'label-description': 'Descripci贸n del problema:', 
                'label-jurisdiction': 'Ubicaci贸n actual (Ciudad, Pa铆s):',
                'btn-submit': 'Enviar Consulta', 'confirmation-text': '隆Enviado correctamente!', 'error-text': 'Error al enviar.', 
                'response-thanks': 'Gracias por compartir su problema legal.', 
                'response-general': 'Este servicio proporciona orientaci贸n general y no sustituye el asesoramiento profesional.', 
                'response-resources': 'Puede consultar estos recursos:', 
                'disclaimer-title': 'Descargo de responsabilidad:', 
                'disclaimer-text': 'La informaci贸n proporcionada en este sitio es solo para fines acad茅micos y no constituye asesoramiento legal. Consulte siempre con un abogado calificado para problemas legales espec铆ficos.', 
                'andi-quiz-title': 'Quiz Traducci贸n Jur铆dica', 
                'quiz-subtitle': 'Adivina la traducci贸n correcta', 'quiz-reveal': 'Revelar', 'quiz-hide': 'Ocultar', 'quiz-next': 'Siguiente'
            },
            en: {
                'about-title': 'Andrei Dima', 
                'about-text1': 'Law student with a deep passion for technology, artificial intelligence, and corporate legal consulting.',
                'about-text2': 'This site serves as my professional portal, where you can find my publications, work, and a direct way to contact me.',
                'reports-title': 'Academic Papers', 
                'reports-subtitle': 'Access my academic papers and projects.', 
                'report1': 'Analysis of EU NewGen Funds', 
                'report2': 'Commentary: Supreme Court Ruling (191/2021)', 
                'report3': 'Commentary: Supreme Court Ruling (3079/2016)',
                'report4': 'Legal Analysis of Robot Judges', 
                'report5': 'Presentation on Maritime Transport',
                'report6': 'Practical Analysis of International Non-Contractual Liability',
                'travel-title': 'My Travels', 'map-show': 'Show Map', 'map-hide': 'Hide Map', 
                'contact-title': 'Legal Consultation', 'contact-subtitle': 'Preliminary review form.', 'label-name': 'Name:', 'label-email': 'Email:', 'label-phone': 'Phone:', 'label-description': 'Issue Description:', 
                'label-jurisdiction': 'Current Location (City, Country):',
                'btn-submit': 'Submit Inquiry', 'confirmation-text': 'Sent successfully!', 'error-text': 'Error sending.', 
                'response-thanks': 'Thank you for sharing your legal issue.', 
                'response-general': 'This service provides general guidance and does not replace professional advice.', 
                'response-resources': 'You can consult these resources:', 
                'disclaimer-title': 'Disclaimer:', 'disclaimer-text': 'The information provided on this site is for academic purposes only and does not constitute legal advice. Always consult with a qualified attorney for specific legal issues.', 
                'andi-quiz-title': 'Legal Translation Quiz', 
                'quiz-subtitle': 'Guess the correct translation', 'quiz-reveal': 'Reveal', 'quiz-hide': 'Hide', 'quiz-next': 'Next'
            }
        };

        /* ================= QUIZ 50 TRMINOS ================= */
        const flashcards = [
            { es:{q:'Abogado', a:'Lawyer'}, en:{q:'Lawyer', a:'Abogado'} },
            { es:{q:'Contrato', a:'Contract'}, en:{q:'Contract', a:'Contrato'} },
            { es:{q:'Jurisdicci贸n', a:'Jurisdiction'}, en:{q:'Jurisdiction', a:'Jurisdicci贸n'} },
            { es:{q:'Demandante', a:'Plaintiff'}, en:{q:'Plaintiff', a:'Demandante'} },
            { es:{q:'Demandado', a:'Defendant'}, en:{q:'Defendant', a:'Demandado'} },
            { es:{q:'Demanda', a:'Lawsuit/Claim'}, en:{q:'Lawsuit', a:'Demanda'} },
            { es:{q:'Veredicto', a:'Verdict'}, en:{q:'Verdict', a:'Veredicto'} },
            { es:{q:'Juez', a:'Judge'}, en:{q:'Judge', a:'Juez'} },
            { es:{q:'Tribunal', a:'Court'}, en:{q:'Court', a:'Tribunal'} },
            { es:{q:'Fiscal', a:'Prosecutor'}, en:{q:'Prosecutor', a:'Fiscal'} },
            { es:{q:'Propiedad Intelectual', a:'IP'}, en:{q:'IP', a:'Propiedad Intelectual'} },
            { es:{q:'Testigo', a:'Witness'}, en:{q:'Witness', a:'Testigo'} },
            { es:{q:'Juramento', a:'Oath'}, en:{q:'Oath', a:'Juramento'} },
            { es:{q:'Fianza', a:'Bail'}, en:{q:'Bail', a:'Fianza'} },
            { es:{q:'Delito grave', a:'Felony'}, en:{q:'Felony', a:'Delito grave'} },
            { es:{q:'Delito leve', a:'Misdemeanor'}, en:{q:'Misdemeanor', a:'Delito leve'} },
            { es:{q:'Apelaci贸n', a:'Appeal'}, en:{q:'Appeal', a:'Apelaci贸n'} },
            { es:{q:'Sentencia', a:'Sentence/Judgment'}, en:{q:'Judgment', a:'Sentencia'} },
            { es:{q:'Custodia', a:'Custody'}, en:{q:'Custody', a:'Custodia'} },
            { es:{q:'Negligencia', a:'Negligence'}, en:{q:'Negligence', a:'Negligencia'} },
            { es:{q:'Da帽os y perjuicios', a:'Damages'}, en:{q:'Damages', a:'Da帽os y perjuicios'} },
            { es:{q:'Orden judicial', a:'Warrant/Order'}, en:{q:'Warrant', a:'Orden judicial'} },
            { es:{q:'Patente', a:'Patent'}, en:{q:'Patent', a:'Patente'} },
            { es:{q:'Marca registrada', a:'Trademark'}, en:{q:'Trademark', a:'Marca registrada'} },
            { es:{q:'Derechos de autor', a:'Copyright'}, en:{q:'Copyright', a:'Derechos de autor'} },
            { es:{q:'Acuerdo', a:'Settlement'}, en:{q:'Settlement', a:'Acuerdo'} },
            { es:{q:'Responsabilidad', a:'Liability'}, en:{q:'Liability', a:'Responsabilidad'} },
            { es:{q:'Cl谩usula', a:'Clause'}, en:{q:'Clause', a:'Cl谩usula'} },
            { es:{q:'Incumplimiento', a:'Breach'}, en:{q:'Breach', a:'Incumplimiento'} },
            { es:{q:'Testamento', a:'Will'}, en:{q:'Will', a:'Testamento'} },
            { es:{q:'Herencia', a:'Inheritance'}, en:{q:'Inheritance', a:'Herencia'} },
            { es:{q:'Arrendamiento', a:'Lease'}, en:{q:'Lease', a:'Arrendamiento'} },
            { es:{q:'Inquilino', a:'Tenant'}, en:{q:'Tenant', a:'Inquilino'} },
            { es:{q:'Desahucio', a:'Eviction'}, en:{q:'Eviction', a:'Desahucio'} },
            { es:{q:'Quiebra', a:'Bankruptcy'}, en:{q:'Bankruptcy', a:'Quiebra'} },
            { es:{q:'Fusi贸n', a:'Merger'}, en:{q:'Merger', a:'Fusi贸n'} },
            { es:{q:'Adquisici贸n', a:'Acquisition'}, en:{q:'Acquisition', a:'Adquisici贸n'} },
            { es:{q:'Estatuto', a:'Statute'}, en:{q:'Statute', a:'Estatuto'} },
            { es:{q:'Reglamento', a:'Regulation'}, en:{q:'Regulation', a:'Reglamento'} },
            { es:{q:'Litigio', a:'Litigation'}, en:{q:'Litigation', a:'Litigio'} },
            { es:{q:'Arbitraje', a:'Arbitration'}, en:{q:'Arbitration', a:'Arbitraje'} },
            { es:{q:'Mediaci贸n', a:'Mediation'}, en:{q:'Mediation', a:'Mediaci贸n'} },
            { es:{q:'Declaraci贸n', a:'Affidavit'}, en:{q:'Affidavit', a:'Declaraci贸n jurada'} },
            { es:{q:'Citaci贸n', a:'Subpoena'}, en:{q:'Subpoena', a:'Citaci贸n'} },
            { es:{q:'Veredicto de culpabilidad', a:'Guilty verdict'}, en:{q:'Guilty verdict', a:'Culpable'} },
            { es:{q:'Absoluci贸n', a:'Acquittal'}, en:{q:'Acquittal', a:'Absoluci贸n'} },
            { es:{q:'Pena de muerte', a:'Death penalty'}, en:{q:'Death penalty', a:'Pena de muerte'} },
            { es:{q:'Homicidio', a:'Homicide'}, en:{q:'Homicide', a:'Homicidio'} },
            { es:{q:'Fraude', a:'Fraud'}, en:{q:'Fraud', a:'Fraude'} },
            { es:{q:'Soborno', a:'Bribery'}, en:{q:'Bribery', a:'Soborno'} }
        ];

        let currentLanguage = localStorage.getItem('preferredLanguage') || 'es';
        let currentQuizIndex = 0;

        function setLanguage(lang) {
            document.body.classList.add('fading');
            setTimeout(() => {
                currentLanguage = lang;
                localStorage.setItem('preferredLanguage', lang);
                document.documentElement.lang = lang;
                Object.keys(translations[lang]).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        if(key.includes('link')) element.setAttribute('title', translations[lang][key]);
                        else if(element.tagName === 'INPUT') element.placeholder = translations[lang]['label-jurisdiction'].replace(':', '');
                        else element.textContent = translations[lang][key];
                    }
                });
                const jurisdictionInput = document.getElementById('jurisdiction');
                if(jurisdictionInput) {
                    jurisdictionInput.placeholder = lang === 'es' ? 'Ej: Madrid, Espa帽a' : 'E.g: Madrid, Spain';
                }

                const mapContent = document.getElementById('mapContent');
                const mapToggleText = document.getElementById('map-toggle-text');
                if (mapContent.classList.contains('expanded')) {
                    mapToggleText.textContent = translations[lang]['map-hide'];
                } else {
                    mapToggleText.textContent = translations[lang]['map-show'];
                }
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.lang === lang);
                });
                renderQuizCard();
                if(mapChart) {
                    mapChart.series[0].update({ name: currentLanguage === 'es' ? 'Viajes' : 'Travels' });
                    initMap();
                }
                document.body.classList.remove('fading');
            }, 200); 
        }

        document.querySelectorAll('.lang-btn').forEach(btn => btn.addEventListener('click', () => setLanguage(btn.dataset.lang)));

        const quizTermEl = document.getElementById('andi-quiz-term-text');
        const quizAnswerEl = document.getElementById('andi-quiz-answer');
        const quizRevealBtn = document.getElementById('andi-btn-reveal');
        const quizNextBtn = document.getElementById('andi-btn-next');

        function renderQuizCard() {
            const card = flashcards[currentQuizIndex];
            if (!card) return;
            const data = card[currentLanguage];
            quizTermEl.textContent = data.q;
            quizAnswerEl.textContent = data.a;
            quizAnswerEl.classList.remove('visible');
            quizRevealBtn.textContent = translations[currentLanguage]['quiz-reveal'];
        }

        quizRevealBtn.addEventListener('click', () => {
            const isVisible = quizAnswerEl.classList.contains('visible');
            if (isVisible) {
                quizAnswerEl.classList.remove('visible');
                quizRevealBtn.textContent = translations[currentLanguage]['quiz-reveal'];
            } else {
                quizAnswerEl.classList.add('visible');
                quizRevealBtn.textContent = translations[currentLanguage]['quiz-hide'];
            }
        });

        quizNextBtn.addEventListener('click', () => {
            currentQuizIndex = (currentQuizIndex + 1) % flashcards.length;
            renderQuizCard();
        });

        let mapChart = null;
        let animTimeouts = [];

        function initMap() {
            if (mapChart) mapChart.destroy();
            mapChart = Highcharts.mapChart('map-container', {
                chart: { map: 'custom/europe', backgroundColor: 'transparent', animation: false },
                title: { text: '' },
                mapNavigation: { enabled: false },
                exporting: { enabled: false },
                legend: { enabled: false },
                credits: { enabled: false },
                tooltip: { 
                    useHTML: true,
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    borderRadius: 8,
                    borderWidth: 0,
                    shadow: true,
                    padding: 0,
                    headerFormat: '',
                    formatter: function () {
                        const point = this.point;
                        const images = point.customImgs || [];
                        const lang = currentLanguage;
                        const isWideClass = images.length > 1 ? 'wide' : '';
                        let imagesHtml = '';
                        if (images.length > 0) {
                            imagesHtml = '<div class="tooltip-gallery">';
                            images.forEach(img => { imagesHtml += `<img src="${img}">`; });
                            imagesHtml += '</div>';
                        }
                        const name = point.customName[lang];
                        const text = point.customText[lang];
                        return `
                        <div class="custom-tooltip ${isWideClass}">
                            ${imagesHtml}
                            <h4 style="margin: 5px 0 5px 0; color:#2874A6; font-size:1.1em;">${name}</h4>
                            <p style="font-size:0.85em; margin:0; line-height:1.4;">${text || ''}</p>
                        </div>`;
                    }
                },
                series: [{
                    data: [],
                    name: currentLanguage === 'es' ? 'Viajes' : 'Travels',
                    joinBy: 'hc-key',
                    borderColor: '#1e293b', 
                    borderWidth: 1,
                    nullColor: '#334155', 
                    states: { hover: { color: '#38bdf8' } }
                }]
            });
        }

        function playMapAnimation() {
            animTimeouts.forEach(t => clearTimeout(t));
            animTimeouts = [];
            let currentData = [];
            visitedCountriesData.forEach((country, i) => {
                const t = setTimeout(() => {
                    currentData.push({ 
                        'hc-key': country.code, 
                        value: 1, 
                        color: '#38bdf8', 
                        customName: country.name,
                        customText: country.text,
                        customImgs: country.imgs 
                    });
                    mapChart.series[0].setData([...currentData], false);
                    mapChart.redraw(false);
                }, i * 400); 
                animTimeouts.push(t);
            });
        }

        const mapToggle = document.getElementById('mapToggle');
        const mapContent = document.getElementById('mapContent');
        mapToggle.addEventListener('click', function() {
            mapContent.classList.toggle('expanded');
            const icon = this.querySelector('i');
            if (mapContent.classList.contains('expanded')) {
                document.getElementById('map-toggle-text').textContent = translations[currentLanguage]['map-hide'];
                icon.style.transform = 'rotate(180deg)';
                setTimeout(() => { initMap(); playMapAnimation(); }, 300);
            } else {
                document.getElementById('map-toggle-text').textContent = translations[currentLanguage]['map-show'];
                icon.style.transform = 'rotate(0deg)';
                animTimeouts.forEach(t => clearTimeout(t));
            }
        });

        (function(){ emailjs.init('hz9CzCgK-LggHycqt'); })();
        document.getElementById('legal-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const btn = document.getElementById('btn-submit');
            const originalText = btn.textContent;
            
            // ANIMACIN BOTN
            btn.classList.add('loading');
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Enviando...';
            
            document.getElementById('confirmation').style.display = 'none';
            document.getElementById('error').style.display = 'none';
            
            emailjs.sendForm('LegemConnect', 'template_m5tlbo5', this).then(function() {
                document.getElementById('confirmation').style.display = 'block';
                document.getElementById('legal-form').reset();
                
                // RESTAURAR BOTN
                btn.classList.remove('loading');
                btn.innerHTML = originalText;
                
                const lang = currentLanguage;
                const responseDiv = document.getElementById('response');
                
                responseDiv.innerHTML = `
                    <p><strong>${translations[lang]['response-thanks']}</strong></p>
                    <p>${translations[lang]['response-general']}</p>
                    <p>${translations[lang]['response-resources']}</p>
                    <ul style="text-align: left; margin-top: 5px;">
                        <li><a href='http://www.abogacia.es/servicios/' target='_blank' style="color:var(--accent-primary)">Abogac铆a Espa帽ola</a></li>
                        <li><a href='https://justiciaoberta.gva.es/es/necessite-un-advocat-i-no-m-ho-puc-pagar/' target='_blank' style="color:var(--accent-primary)">Justicia Gratuita</a></li>
                    </ul>`;
                responseDiv.style.display = 'block';
            }, function(error) {
                document.getElementById('error').style.display = 'block';
                btn.classList.remove('loading');
                btn.innerHTML = originalText;
            });
        });

        setLanguage(currentLanguage);
        renderQuizCard();
    </script>
</body>
</html>
